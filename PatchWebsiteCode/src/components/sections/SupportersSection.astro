---
import SectionHeader from '../ui/SectionHeader.astro';

interface Supporter {
    name: string;
    logoSrc?: string;
}

interface Props {
    label?: string;
    title: string;
    subtitle?: string;
    supporters: Supporter[];
    class?: string;
}

const { label, title, subtitle, supporters, class: className } = Astro.props;

// Rotation pattern for organic stamp/sticker look
const rotations = ['-0.8deg', '0.5deg', '-0.3deg', '0.7deg', '-0.5deg'];
---

<section class:list={['supporters-section', className]}>
    <!-- Graph paper background -->
    <div class="supporters-graph-paper" aria-hidden="true"></div>

    <SectionHeader label={label} title={title} subtitle={subtitle} />

    <div class="supporters-grid">
        {supporters.map((supporter, index) => (
            <div
                class="supporter-stamp"
                style={`--rotation: ${rotations[index % rotations.length]}`}
            >
                {supporter.logoSrc ? (
                    <img src={supporter.logoSrc} alt={supporter.name} loading="lazy" />
                ) : (
                    <span class="supporter-name">{supporter.name}</span>
                )}
            </div>
        ))}
    </div>
</section>

<style>
    .supporters-section {
        position: relative;
        padding: 48px 24px;
        overflow: hidden;
    }

    /* Graph paper background */
    .supporters-graph-paper {
        position: absolute;
        inset: 0;
        background:
            linear-gradient(#e8e8e8 1px, transparent 1px),
            linear-gradient(90deg, #e8e8e8 1px, transparent 1px);
        background-size: 20px 20px;
        opacity: 0.04;
        pointer-events: none;
    }

    .supporters-grid {
        position: relative;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 32px 48px;
        max-width: 900px;
        margin: 0 auto;
        padding: 24px;
    }

    .supporter-stamp {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 56px;
        padding: 12px 16px;
        background: #fff;
        border: 1px solid #e0e0e0;
        box-shadow: 2px 3px 6px rgba(0,0,0,0.06);
        transform: rotate(var(--rotation, 0deg));
        transition: all 0.2s ease;
    }

    .supporter-stamp:hover {
        transform: rotate(0deg) scale(1.02);
        box-shadow: 3px 4px 10px rgba(0,0,0,0.1);
    }

    .supporter-stamp img {
        max-height: 100%;
        max-width: 160px;
        object-fit: contain;
        filter: invert(1) grayscale(40%);
        opacity: 0.85;
        transition: all 0.2s ease;
    }

    .supporter-stamp:hover img {
        filter: invert(1) grayscale(0%);
        opacity: 1;
    }

    .supporter-name {
        font-family: 'Courier New', Courier, monospace;
        font-size: var(--text-sm);
        font-weight: 500;
        color: var(--text-secondary);
        letter-spacing: 0.02em;
        white-space: nowrap;
    }

    @media (max-width: 640px) {
        .supporters-grid {
            gap: 24px 32px;
        }

        .supporter-stamp {
            height: 44px;
            padding: 8px 12px;
        }

        .supporter-stamp img {
            max-width: 140px;
        }
    }
</style>
